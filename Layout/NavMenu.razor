<!-- Contenedor superior del menú de navegación -->
<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">FrontBlazor</a>

        <button title="Navigation menu" class="navbar-toggler" @onclick="ToggleNavMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</div>

<!-- Contenedor principal del menú de navegación -->
<div class="@NavMenuCssClass nav-scrollable">
    <nav class="flex-column">
        <!-- Opción de menú: Home -->
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home
            </NavLink>
        </div>

        <!-- Modulo Legal -->
        <div class="nav-item px-3">
            <div class="nav-link accordion text-center">
                Modulo Legal
                <span class="arrow">▼</span>
            </div>
            <div class="panel">
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="seccion">Sección</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="subseccion">Subsección</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="articulo">Articulo</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="paragrafo">Paragrafo</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="literal">Literal</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="numeral">Numeral</NavLink>
                </div>
            </div>
        </div>

        <!-- Modulo de Indicadores -->
        <div class="nav-item px-3">
            <div class="nav-link accordion text-center">
                Modulo de Indicadores <span class="arrow">▼</span>
            </div>
            <div class="panel">
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="indicador">Indicadores</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="frecuencia">Frecuencia</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="tipoindicador">Tipo indicador</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="tipoactor">Tipo actor</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="sentido">Sentido</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="represenvisual">Represenvisual</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="fuente">Fuente</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="unidadmedicion">Unidad medición</NavLink>
                </div>
            </div>
        </div>

        <!-- Modulo de Usuarios -->
        <div class="nav-item px-3">
            <div class="nav-link accordion text-center">
                Modulo de Usuarios <span class="arrow">▼</span>
            </div>
            <div class="panel">
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="rol">Rol</NavLink>
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="/usuario">Usuario</NavLink>
                </div>
            </div>
        </div>
    </nav>
</div>

<!-- Estilos CSS -->
<style>
    .accordion {
        color: white; /* Cambiar color del texto */
    }

    .accordion:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
    }

    .accordion .arrow {
        color: white; /* Cambiar color de la flecha */
    }

    .panel {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.5s ease;
    }

    .arrow {
        display: inline-block;
        margin-left: 8px;
        transition: transform 0.3s ease;
    }

    .accordion.active .arrow {
        transform: rotate(180deg);
    }
</style>

<!-- Lógica de JavaScript para la interacción -->
<script>
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {

            this.classList.toggle("active");

            const panel = this.nextElementSibling;

            if (panel.style.maxHeight) {
                panel.style.maxHeight = panel.scrollHeight + "px";
                requestAnimationFrame(() => {
                    panel.style.maxHeight = "0";
                });
                setTimeout(() => {
                    panel.style.maxHeight = null;
                }, 400);
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            }
        });
    }
</script>

<!-- Bloque de código C# -->
@code {
    private bool collapseNavMenu = true;

    private string? NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}
